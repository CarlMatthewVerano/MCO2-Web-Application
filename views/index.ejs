<!-- import script file -->
<script>
  function changePool(port) {
    fetch('/changePool', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ newPort: port }),
    })
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      // location.reload();
    })
    .catch(error => {
      console.error('There has been a problem with your fetch operation:', error);
    });
}
</script>

<div class="container-fluid" style="margin: 15px 15px">
  <!-- Add the buttons here -->
  <button onclick="changePool('20198')" class="btn btn-primary">
    Change Pool to 20198
  </button>
  <button onclick="changePool('20199')" class="btn btn-primary">
    Change Pool to 20199
  </button>
  <button onclick="changePool('20200')" class="btn btn-primary">
    Change Pool to 20200
  </button>

  <div class="">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">Patient ID</th>
          <th scope="col">Appointment Status</th>
          <th scope="col"></th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        <% for(let i = 0; i < data.length; i++) {%>
        <tr>
          <td><%= data[i].px_id%></td>
          <td><%= data[i].appt_status%></td>
          <td class="text-center">
            <a class="link-dark" href="/edit/<%= data[i].px_id %>">Edit</a>
          </td>
          <form action="/edit/<%=data[i].px_id %>/delete" method="POST">
            <input type="hidden" name="px_id" value="<%=data[i].px_id %>" />
            <td class="text-center">
              <button class="fas fa-trash btn" type="submit"></button>
            </td>
          </form>
        </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>
